<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulacro UNT - √Årea C | PrepIA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover:not(.selected):not(.disabled) { background-color: #f3f4f6; transform: translateX(5px); }
        .option-btn.selected { background-color: #e0e7ff; border-color: #6366f1; font-weight: bold; }
        
        /* Grid de navegaci√≥n */
        .nav-grid-btn { width: 35px; height: 35px; font-size: 0.75rem; display: flex; align-items: center; justify-content: center; border-radius: 0.375rem; transition: all 0.2s; }
        .nav-grid-btn.active { border: 2px solid #4f46e5; transform: scale(1.1); }
        .nav-grid-btn.answered { background-color: #e0e7ff; color: #4338ca; }
        .nav-grid-btn.current { background-color: #4f46e5; color: white; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-600 p-2 rounded-lg text-white">
                        <span class="font-bold text-xl">UNT</span>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-gray-800 leading-tight">Simulacro de Admisi√≥n</h1>
                        <p class="text-xs text-gray-500">√Årea C - Ciencias de la Persona</p>
                    </div>
                </div>
                
                <div class="hidden md:flex flex-col items-end">
                    <span class="text-xs text-gray-500 uppercase font-semibold">Tiempo Restante</span>
                    <span id="timeDisplay" class="text-2xl font-mono font-bold text-indigo-600">03:00:00</span>
                </div>

                <button id="finishBtnTop" class="px-4 py-2 bg-red-50 text-red-600 font-bold rounded-lg hover:bg-red-100 transition text-sm hidden">
                    Finalizar
                </button>
            </div>
        </div>
    </header>

    <div class="flex-1 max-w-7xl mx-auto w-full p-4 gap-6 flex flex-col md:flex-row">
        
        <div id="introScreen" class="flex-1 flex flex-col items-center justify-center bg-white rounded-2xl shadow-lg p-8 text-center">
            <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Examen Tipo Admisi√≥n UNT</h2>
            <p class="text-gray-600 mb-8 max-w-md">√Årea C: Ciencias de la Persona. El examen consta de 100 preguntas y tienes 3 horas para completarlo.</p>
            
            <div class="grid grid-cols-3 gap-4 w-full max-w-lg mb-8">
                <div class="bg-gray-50 p-4 rounded-xl">
                    <span class="block text-2xl font-bold text-indigo-600">100</span>
                    <span class="text-xs text-gray-500">Preguntas</span>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <span class="block text-2xl font-bold text-indigo-600">180</span>
                    <span class="text-xs text-gray-500">Minutos</span>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <span class="block text-2xl font-bold text-indigo-600">C</span>
                    <span class="text-xs text-gray-500">√Årea</span>
                </div>
            </div>

            <button onclick="startExam()" class="bg-indigo-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-indigo-700 hover:shadow-xl transition transform hover:-translate-y-1">
                Comenzar Examen Ahora
            </button>
        </div>

        <div id="examContent" class="hidden flex-1 flex flex-col md:flex-row gap-6 w-full">
            
            <div class="flex-1 flex flex-col">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 mb-4 flex-1">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span id="questionCategory" class="inline-block px-3 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-full mb-2">
                                Materia
                            </span>
                            <h3 class="text-gray-500 text-sm font-medium">Pregunta <span id="currentQNum">1</span> de 100</h3>
                        </div>
                    </div>

                    <div id="questionText" class="text-lg font-medium text-gray-900 mb-6 leading-relaxed">
                        Cargando pregunta...
                    </div>

                    <div id="optionsContainer" class="space-y-3">
                        </div>
                </div>

                <div class="flex justify-between items-center bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
                    <button id="prevBtn" onclick="prevQuestion()" class="px-6 py-2 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 disabled:opacity-50 transition">
                        ‚Üê Anterior
                    </button>
                    <button id="nextBtn" onclick="nextQuestion()" class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition">
                        Siguiente ‚Üí
                    </button>
                </div>
            </div>

            <div class="w-full md:w-80 flex-shrink-0">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-5 sticky top-24">
                    <h4 class="font-bold text-gray-800 mb-4 flex justify-between items-center">
                        Navegaci√≥n
                        <span class="text-xs font-normal text-gray-500"><span id="answeredCount">0</span>/100 resueltas</span>
                    </h4>
                    
                    <div id="questionGrid" class="grid grid-cols-5 gap-2 max-h-[400px] overflow-y-auto pr-2 mb-6">
                        </div>

                    <div class="border-t border-gray-100 pt-4">
                        <div class="flex gap-2 mb-2 text-xs text-gray-500">
                            <span class="w-3 h-3 bg-indigo-600 rounded-sm inline-block"></span> Actual
                            <span class="w-3 h-3 bg-indigo-100 rounded-sm inline-block ml-2"></span> Resuelta
                        </div>
                        <button onclick="finishExam()" class="w-full bg-gradient-to-r from-red-500 to-pink-600 text-white font-bold py-3 rounded-xl shadow hover:opacity-90 transition">
                            Terminar Examen
                        </button>
                    </div>
                </div>
            </div>

        </div>
        
        <div id="resultsScreen" class="hidden flex-1 bg-white rounded-2xl shadow-lg p-8 text-center max-w-3xl mx-auto mt-10">
            <div class="mb-6">
                <span class="text-6xl">üìä</span>
            </div>
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Resultados del Simulacro</h2>
            <p class="text-gray-600 mb-8">Puntaje calculado en base al sistema UNT (4 puntos correcta, -1 incorrecta)</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-blue-50 p-6 rounded-2xl">
                    <p class="text-blue-600 font-medium mb-1">Puntaje Total</p>
                    <p id="totalScore" class="text-4xl font-bold text-blue-700">0</p>
                    <p class="text-xs text-blue-500 mt-1">M√°x: 400</p>
                </div>
                <div class="bg-green-50 p-6 rounded-2xl">
                    <p class="text-green-600 font-medium mb-1">Aciertos</p>
                    <p id="totalCorrect" class="text-4xl font-bold text-green-700">0</p>
                </div>
                <div class="bg-red-50 p-6 rounded-2xl">
                    <p class="text-red-600 font-medium mb-1">Errores</p>
                    <p id="totalIncorrect" class="text-4xl font-bold text-red-700">0</p>
                </div>
            </div>

            <div class="flex gap-4 justify-center">
                <a href="dashboard.html" class="px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition">
                    Volver al Dashboard
                </a>
                <button onclick="location.reload()" class="px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition">
                    Intentar de Nuevo
                </button>
            </div>
        </div>

    </div>

    <script>
        // ================= DATOS DEL EXAMEN (Extracto del PDF) =================
        // Nota: He incluido preguntas reales del PDF. Para llegar a 100, he duplicado
        // o creado placeholders para mantener la funcionalidad completa.
        
        const examQuestions = [
            // --- DESARROLLO PERSONAL (Psicolog√≠a / Filosof√≠a / C√≠vica) ---
            {
                id: 1,
                category: "Psicolog√≠a",
                question: "De acuerdo a James Marcia, cuando un adolescente est√° en el proceso de examinar varias opciones de roles est√° en el periodo de:",
                options: ["difusi√≥n de identidad", "hipoteca", "moratoria", "logro de la identidad", "regresi√≥n de la identidad"],
                correct: 2 // C: Moratoria
            },
            {
                id: 2,
                category: "Psicolog√≠a",
                question: "Jos√© valora sus fortalezas y admite sus dificultades utilizando el pensamiento correcto, conduci√©ndose de acuerdo con sus objetivos y necesidades. Lo se√±alado es una caracter√≠stica de la autoestima denominada:",
                options: ["aceptaci√≥n personal", "resiliencia ante desaf√≠os", "influencia en relaciones", "valoraci√≥n negativa", "reconocimiento de debilidades"],
                correct: 0
            },
            {
                id: 3,
                category: "Psicolog√≠a",
                question: "Es una dimensi√≥n de la identidad que se caracteriza por el sentido de pertenencia a un grupo:",
                options: ["biol√≥gica", "filos√≥fica", "sociocultural", "√©tica", "moral"],
                correct: 2
            },
            {
                id: 4,
                category: "Sexualidad",
                question: "Son derechos sexuales y reproductivos, excepto:",
                options: ["educaci√≥n integral de la sexualidad", "identidad sexual con libertad", "decisi√≥n libre y aut√≥noma de relaciones", "relaciones sexuales forzadas", "ejercicio y disfrute pleno"],
                correct: 3
            },
            {
                id: 6,
                category: "C√≠vica",
                question: "Es aquel tipo de asesinato cometido por una persona extra√±a con la que la v√≠ctima no tiene ninguna relaci√≥n:",
                options: ["feminicidio √≠ntimo", "feminicidio no √≠ntimo", "feminicidio por conexi√≥n", "violencia de g√©nero", "desigualdad de g√©nero"],
                correct: 1
            },
            {
                id: 10,
                category: "Desarrollo Personal",
                question: "Mar√≠a es una joven que ha decidido orientar todos sus recursos (tanto econ√≥micos como familiares) para lograr lo que se ha propuesto. Esto se corresponde con:",
                options: ["metas personales", "vocaci√≥n existencial", "visi√≥n personal", "misi√≥n personal", "planificaci√≥n"],
                correct: 3
            },
            {
                id: 16,
                category: "C√≠vica",
                question: "En el supuesto caso que Per√∫ y Ecuador entren con un conflicto territorial. La estructura org√°nica de la OEA que intervendr√≠a ser√≠a:",
                options: ["La Asamblea General", "La Reuni√≥n de Consulta de Ministros de RR.EE.", "Los Consejos Consulares", "La Secretar√≠a General", "El Comit√© Jur√≠dico"],
                correct: 1
            },
            {
                id: 20,
                category: "Filosof√≠a",
                question: "Los antiguos sabios de la antig√ºedad griega buscaban el principio de todas las cosas. Esto tambi√©n se denomin√≥:",
                options: ["mito", "arj√©", "raz√≥n", "thecn√©", "eidos"],
                correct: 1
            },
            
            // --- CIENCIAS SOCIALES (Historia / Geograf√≠a / Econom√≠a) ---
            {
                id: 31,
                category: "Historia",
                question: "La herramienta desarrollada durante el Paleol√≠tico superior fue:",
                options: ["lascas simples", "hachas de mano", "microlitos", "bifaces", "n√∫cleos"],
                correct: 2
            },
            {
                id: 34,
                category: "Historia",
                question: "La causa principal de la Revoluci√≥n Francesa fue:",
                options: ["el conflicto con Austria", "la crisis financiera y la injusticia social", "la influencia de la rev. americana", "expansi√≥n napole√≥nica", "creaci√≥n de Estados Generales"],
                correct: 1
            },
            {
                id: 35,
                category: "Historia",
                question: "La medida que fue implementada durante el Protectorado de Jos√© de San Mart√≠n es la:",
                options: ["Venta de tierras del Estado", "Firma de Constituci√≥n 1823", "Abolici√≥n del tributo ind√≠gena", "Tribunal de Seguridad P√∫blica", "Creaci√≥n de Piura"],
                correct: 2
            },
            {
                id: 37,
                category: "Geograf√≠a",
                question: "Si en una ciudad de Suecia hoy no hay noche y el sol alumbra 24 horas (sol de medianoche), podemos inferir que:",
                options: ["Es verano en ambos hemisferios", "Pilar est√° en los tr√≥picos", "El hermano vive el d√≠a artificial", "El hermano est√° dentro del c√≠rculo polar (verano boreal)", "Es equilibrio de oto√±o"],
                correct: 3
            },
            {
                id: 41,
                category: "Econom√≠a",
                question: "En un restaurante, al contratar un 4to chef, la producci√≥n total baja de 120 a 105 platos (rendimientos decrecientes). Esto hace referencia a:",
                options: ["proteccionismo", "escuela cl√°sica", "escuela neocl√°sica", "la productividad", "escuela mercantilista"],
                correct: 3
            },
            
            // --- COMUNICACI√ìN Y LENGUAJE ---
            {
                id: 48,
                category: "Literatura",
                question: "La ceguera en la obra Edipo Rey simboliza la:",
                options: ["ignorancia ante la verdad", "sabidur√≠a divina", "debilidad f√≠sica", "libertad espiritual", "justicia ciega"],
                correct: 1 // Tiresias es ciego pero sabio, Edipo ve pero ignora
            },
            {
                id: 51,
                category: "Literatura",
                question: "El papel que juega la soledad en la novela Cien a√±os de soledad, es:",
                options: ["tema secundario", "conexi√≥n con naturaleza", "el motor del ciclo de la familia Buend√≠a", "s√≠mbolo de felicidad", "castigo divino"],
                correct: 2
            },
            {
                id: 58,
                category: "Lenguaje",
                question: "En el texto sobre Chomsky, la palabra 'Por ejemplo' es un conector de:",
                options: ["consecuencia", "ejemplificaci√≥n", "orden", "situaci√≥n", "adici√≥n"],
                correct: 1
            },

            // --- MATEM√ÅTICA ---
            {
                id: 84,
                category: "Raz. Matem√°tico",
                question: "Usando 7 varillas se forman tri√°ngulos. Usando solamente 101 varillas de dimensi√≥n 'a', el n√∫mero de tri√°ngulos que se pueden formar es:",
                options: ["50", "51", "52", "53", "54"],
                correct: 0 // L√≥gica de sucesi√≥n: 3, 5, 7... 2n+1 = 101 -> 2n=100 -> n=50
            },
            {
                id: 86,
                category: "Aritm√©tica",
                question: "Sueldo es DP a edad y a√±os servicio, IP a categor√≠a^2. Mario (2da cat, 10 a√±os, 36 edad) gana 8000. Luis (entr√≥ 8 a√±os antes, 3ra cat). Hallar edad de Luis si gana 6400.",
                options: ["35", "36", "37", "38", "39"],
                correct: 1
            },
            {
                id: 90,
                category: "√Ålgebra",
                question: "Modelo lineal CO2: A√±o 1980 (338.7 ppm), A√±o 2016 (404.2 ppm). Hallar C(t). t=a√±o-1980.",
                options: ["C(t)=-1.8t+3262", "C(t)=1.8t-3224", "C(t)=-1.8t-3262", "C(t)=1.82t+338.7", "C(t)=1.8t+338.7"],
                correct: 4 // Pendiente m = (404.2-338.7)/(36) ‚âà 1.82. Intercepto 338.7
            },

            // --- CIENCIA Y TECNOLOG√çA ---
            {
                id: 92,
                category: "Biolog√≠a",
                question: "En la mujer, la fecundaci√≥n normalmente ocurre en:",
                options: ["el oviducto (trompa de Falopio)", "la corteza ov√°rica", "la m√©dula ov√°rica", "el fol√≠culo de De Graaf", "el endometrio"],
                correct: 0
            },
            {
                id: 97,
                category: "Qu√≠mica",
                question: "Si se realiza la combusti√≥n de un mol de but-2-eno (C4H8), el n√∫mero de moles de ox√≠geno que se consumen es:",
                options: ["4", "5", "6", "7", "8"],
                correct: 2 // C4H8 + 6O2 -> 4CO2 + 4H2O
            },
            {
                id: 100,
                category: "F√≠sica",
                question: "La luz viaja a 3x10^8 m/s. Tiempo para ir del Sol a la Tierra (distancia 1.5x10^11 m) es:",
                options: ["500 s", "225 s", "250 s", "275 s", "300 s"],
                correct: 0 // t = d/v = 1.5x10^11 / 3x10^8 = 0.5x10^3 = 500
            }
        ];

        // RELLENO AUTOM√ÅTICO PARA LLEGAR A 100 PREGUNTAS (Para demo)
        // En producci√≥n, aqu√≠ ir√≠an las 80 preguntas restantes del PDF.
        const categories = ["Psicolog√≠a", "Historia", "Lenguaje", "Matem√°tica", "Biolog√≠a"];
        for(let i = examQuestions.length + 1; i <= 100; i++) {
            examQuestions.push({
                id: i,
                category: categories[Math.floor(Math.random() * categories.length)],
                question: `Esta es una pregunta simulada n√∫mero ${i} para completar el formato de 100 preguntas del simulacro √Årea C.`,
                options: ["Alternativa A simulada", "Alternativa B simulada", "Alternativa C simulada", "Alternativa D simulada", "Alternativa E simulada"],
                correct: Math.floor(Math.random() * 5)
            });
        }

        // ================= L√ìGICA DEL EXAMEN =================
        
        let currentQuestionIndex = 0;
        let userAnswers = new Array(100).fill(null); // Array de 100 nulos
        let timeLeft = 180 * 60; // 180 minutos en segundos
        let timerInterval;

        // DOM Elements
        const introScreen = document.getElementById('introScreen');
        const examContent = document.getElementById('examContent');
        const resultsScreen = document.getElementById('resultsScreen');
        
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const questionCategory = document.getElementById('questionCategory');
        const currentQNum = document.getElementById('currentQNum');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const finishBtnTop = document.getElementById('finishBtnTop');
        const questionGrid = document.getElementById('questionGrid');
        const answeredCount = document.getElementById('answeredCount');

        function startExam() {
            introScreen.classList.add('hidden');
            examContent.classList.remove('hidden');
            finishBtnTop.classList.remove('hidden');
            renderGrid();
            loadQuestion(0);
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById('timeDisplay').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    finishExam();
                }
            }, 1000);
        }

        function renderGrid() {
            questionGrid.innerHTML = '';
            examQuestions.forEach((_, index) => {
                const btn = document.createElement('button');
                btn.className = `nav-grid-btn bg-gray-100 text-gray-600 hover:bg-gray-200`;
                btn.textContent = index + 1;
                btn.onclick = () => loadQuestion(index);
                btn.id = `grid-btn-${index}`;
                questionGrid.appendChild(btn);
            });
        }

        function updateGridStatus() {
            // Reset all active states
            document.querySelectorAll('.nav-grid-btn').forEach(btn => {
                btn.classList.remove('current');
                // Keep answered status
                if (userAnswers[parseInt(btn.textContent)-1] !== null) {
                    btn.classList.add('answered');
                }
            });

            // Highlight current
            const currentBtn = document.getElementById(`grid-btn-${currentQuestionIndex}`);
            if (currentBtn) {
                currentBtn.classList.add('current');
                currentBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Update counter
            const count = userAnswers.filter(a => a !== null).length;
            answeredCount.textContent = count;
        }

        function loadQuestion(index) {
            currentQuestionIndex = index;
            const q = examQuestions[index];
            
            currentQNum.textContent = index + 1;
            questionCategory.textContent = q.category;
            questionText.textContent = q.question;
            
            // Limpiar opciones anteriores
            optionsContainer.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D', 'E'];
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = `option-btn w-full text-left p-4 border border-gray-200 rounded-xl hover:border-indigo-500 flex items-center group ${userAnswers[index] === i ? 'selected' : ''}`;
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-600 font-bold flex items-center justify-center mr-4 group-hover:bg-indigo-100 group-hover:text-indigo-600 transition">${letters[i]}</span>
                    <span class="text-gray-700 group-hover:text-gray-900">${opt}</span>
                `;
                btn.onclick = () => selectOption(i);
                optionsContainer.appendChild(btn);
            });

            // Botones nav
            prevBtn.disabled = index === 0;
            nextBtn.textContent = index === 99 ? "Finalizar" : "Siguiente ‚Üí";
            
            updateGridStatus();
            
            // Renderizar f√≥rmulas si las hay
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            // Recargar para mostrar selecci√≥n (sin parpadeo idealmente, pero simple aqu√≠)
            const buttons = optionsContainer.children;
            for (let btn of buttons) {
                btn.classList.remove('selected');
            }
            buttons[optionIndex].classList.add('selected');
            updateGridStatus();
        }

        function nextQuestion() {
            if (currentQuestionIndex < 99) {
                loadQuestion(currentQuestionIndex + 1);
            } else {
                finishExam();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                loadQuestion(currentQuestionIndex - 1);
            }
        }

        function finishExam() {
            clearInterval(timerInterval);
            examContent.classList.add('hidden');
            document.querySelector('header').classList.add('hidden'); // Ocultar header en resultados
            resultsScreen.classList.remove('hidden');

            // Calcular puntaje (Sistema UNT: Correcta +4, Incorrecta -0.5 o -1. Usaremos +4 / -1 simple)
            let correct = 0;
            let incorrect = 0;
            let blank = 0;

            examQuestions.forEach((q, i) => {
                if (userAnswers[i] === null) {
                    blank++;
                } else if (userAnswers[i] === q.correct) {
                    correct++;
                } else {
                    incorrect++;
                }
            });

            const score = (correct * 4) - (incorrect * 1); // F√≥rmula simple admisi√≥n
            const maxScore = 400;

            document.getElementById('totalScore').textContent = Math.max(0, score); // No mostrar negativos
            document.getElementById('totalCorrect').textContent = correct;
            document.getElementById('totalIncorrect').textContent = incorrect;
        }

        // Check Auth
        document.addEventListener('DOMContentLoaded', () => {
            const userId = localStorage.getItem('prepIA_userID');
            if (!userId) {
                window.location.href = './login.html';
            }
        });
    </script>
</body>
</html>